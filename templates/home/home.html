<!DOCTYPE html>
{% extends 'user/base.html' %}
{% block body_block %}
<div class="jumbotron">
  <div class="container" >

{% if query %}
<div style="display: flex; align-items: center; gap: 10px; margin: 20px 0;">
    <a href="/" style="text-decoration: none;">
  <svg xmlns="http://www.w3.org/2000/svg" 
       width="28" height="28"
       fill="currentColor" 
       viewBox="0 0 16 16">
    <path fill-rule="evenodd" d="M1 8a7 7 0 1 0 14 0A7 7 0 0 0 1 8m15 0A8 8 0 1 1 0 8a8 8 0 0 1 16 0m-4.5-.5a.5.5 0 0 1 0 1H5.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L5.707 7.5z"/>
  </svg>
</a>

    <h5 style="margin: 0;">Search results for "<span style="color: #007bff;">{{ query }}</span>"</h5>
</div>

{% else %}
    <h2>Hi, {{ request.user.username }}</h2>
    <h2>Welcome to Shopkart ðŸ›’</h2>
{% endif %}

<hr>
<div class="container mt-4">
  <div class="row justify-content-center">
    {% for i in products %}
    <div class="col-6 col-sm-6 col-md-4 col-lg-3 mb-4 d-flex justify-content-center" style="width: fit-content;">
      <div class="card h-100 w-100">
        <img src="{{ i.image.url }}" alt="{{ i.name }}" height="180" class="card-img-top object-fit-cover">
        <div class="card-body d-flex flex-column">
          <h5 class="card-title text-truncate" style="min-height: 40px;">{{ i.name|truncatechars:25 }}</h5>
          <p class="card-text mb-3">â‚¹{{ i.price }}</p>
          <a href="/product/{{ i.product_id }}" class="btn btn-primary mt-auto w-100">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16"
                 fill="currentColor" class="bi bi-shop-window me-1" viewBox="0 0 16 16">
              <path d="M2.97 1.35A1 1 0 0 1 3.73 1h8.54a1 1 0 0 1 .76.35l2.609 3.044A1.5 1.5 0 0 1 16 5.37v.255a2.375 2.375 0 0 1-4.25 1.458A2.37 2.37 0 0 1 9.875 8 2.37 2.37 0 0 1 8 7.083 2.37 2.37 0 0 1 6.125 8a2.37 2.37 0 0 1-1.875-.917A2.375 2.375 0 0 1 0 5.625V5.37a1.5 1.5 0 0 1 .361-.976zm1.78 4.275a1.375 1.375 0 0 0 2.75 0 .5.5 0 0 1 1 0 1.375 1.375 0 0 0 2.75 0 .5.5 0 0 1 1 0 1.375 1.375 0 1 0 2.75 0V5.37a.5.5 0 0 0-.12-.325L12.27 2H3.73L1.12 5.045A.5.5 0 0 0 1 5.37v.255a1.375 1.375 0 0 0 2.75 0 .5.5 0 0 1 1 0M1.5 8.5A.5.5 0 0 1 2 9v6h12V9a.5.5 0 0 1 1 0v6h.5a.5.5 0 0 1 0 1H.5a.5.5 0 0 1 0-1H1V9a.5.5 0 0 1 .5-.5m2 .5a.5.5 0 0 1 .5.5V13h8V9.5a.5.5 0 0 1 1 0V13a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V9.5a.5.5 0 0 1 .5-.5"/>
            </svg>
            Shop Now
          </a>
        </div>
      </div>
    </div>
    {% empty %}
    <div id="nullDiv" class="text-center py-5">
      <p>No products found.</p>
    </div>
    {% endfor %}

  </div>
</div>
</div></div>
{% endblock %}
